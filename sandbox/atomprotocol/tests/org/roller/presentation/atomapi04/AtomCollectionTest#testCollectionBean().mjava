    public void testCollectionBean() throws Exception {
        
        // create a collection with a member
        Date date1 = new Date();
        AtomCollection collection = new AtomCollection();
        AtomCollection.Member member1 = new AtomCollection.Member();
        member1.setTitle("title1");
        member1.setHref("http://example.com/item1");
        member1.setUpdated(date1);
        collection.addMember(member1);
        
        // add another member
        Date date2 = new Date();
        AtomCollection.Member member2 = new AtomCollection.Member();
        member2.setTitle("title2");
        member2.setHref("http://example.com/item2");
        member2.setUpdated(date2);
        collection.addMember(member2);
        
        // serialize to XML
        Document doc = AtomCollection.collectionToDocument(collection);
        assertEquals("collection", doc.getRootElement().getName());
        assertEquals(2, doc.getRootElement().getContent().size());
        
        // deserialize from XML and assert we've got the same stuff
        AtomCollection col2 = AtomCollection.documentToCollection(doc);
        assertEquals(2, col2.getMembers().size());
        
        AtomCollection.Member m1 = (AtomCollection.Member)col2.getMembers().get(0);
        assertEquals("title1", m1.getTitle());
        assertEquals("http://example.com/item1", m1.getHref());
        assertCloseEnough(date1, m1.getUpdated());
        
        AtomCollection.Member m2 = (AtomCollection.Member)col2.getMembers().get(1);
        assertEquals("title2", m2.getTitle());
        assertEquals("http://example.com/item2", m2.getHref());
        assertCloseEnough(date2, m2.getUpdated());
    }

