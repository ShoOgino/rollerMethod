    public void testRefreshEntries() throws Exception
    {
        Roller roller = getRoller();
        assertNotNull(roller);       
        PlanetManager planet = roller.getPlanetManager();
        assertNotNull(planet);     
        String feed_url1 = "http://rollerweblogger.org/rss/roller";
        {   
            roller.begin();
            PlanetConfigData config = new PlanetConfigData();
            config.setCacheDir("/tmp"); // TODO use real temp dir
            config.setTitle("test_title");
            config.setAdminEmail("test_admin_email");
            planet.saveConfiguration(config);
            
            PlanetGroupData group = new PlanetGroupData();
            group.setDescription("test_group_desc");
            group.setHandle("test_handle");
            group.setTitle("test_title");
            planet.saveGroup(group);
            
            PlanetSubscriptionData sub = new PlanetSubscriptionData();
            sub.setFeedUrl(feed_url1);
            planet.saveSubscription(sub);
            
            group.addSubscription(sub); 
            planet.saveGroup(group);
            
            roller.commit();
        }        
        {   
            roller.begin();
            planet.refreshEntries();
            roller.commit();
            
            roller.begin();
            PlanetSubscriptionData sub = planet.getSubscription(feed_url1);
            assertTrue(sub.getEntries().size() > 0);
      
            PlanetGroupData group = planet.getGroup("test_handle");
            assertNotNull(group);
            
            planet.deleteSubscription(sub);
            planet.deleteGroup(group);
            
            PlanetConfigData config = planet.getConfiguration();
            config.remove();
            roller.commit();
        }
    }

