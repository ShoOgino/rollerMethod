    /**
     * Return true if a transaction is active on the 
     * current PersistenceManager.
     * @param pm the persistence manager
     * @return true if the persistence manager is not null and has 
     * an active transaction
     */
    private boolean isTransactionActive(PersistenceManager pm) {
        if (pm == null)
            return false;
        return pm.currentTransaction().isActive();
    }

