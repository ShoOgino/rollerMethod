    public void setUserAttribute(String userName, String attribute, String value) throws WebloggerException {
        UserAttribute userAttribute = null;
        TypedQuery<UserAttribute> q = strategy.getNamedQuery("UserAttribute.getByUserNameAndAttrName",
                UserAttribute.class);
        q.setParameter(1, userName);
        q.setParameter(2, attribute);
        try {
            userAttribute = q.getSingleResult();
        } catch (NoResultException ignored) {
        }
        if (userAttribute != null) {
            if (value.equals("")) {
                this.strategy.remove(userAttribute);
            } else {
                userAttribute.setValue(value);
                this.strategy.store(userAttribute);
            }
        } else {
            userAttribute = new UserAttribute(userName, attribute, value);
            this.strategy.store(userAttribute);
        }
    }

