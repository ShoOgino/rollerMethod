    /**
     * Persistence strategy configures itself by using Roller properties.
     */
    protected HibernatePersistenceStrategy() throws WebloggerException {
        
        Configuration config = new Configuration();
        config.configure("/META-INF/weblogger-hibernate.cfg.xml");

        // Add all Hibernate properties found in WebloggerConfig
        Properties props = new Properties();
        Enumeration keys = WebloggerConfig.keys();
        while (keys.hasMoreElements()) {
            String key = (String)keys.nextElement();
            if (key.startsWith("hibernate.")) {
                String value = WebloggerConfig.getProperty(key);
                props.setProperty(key, value);
            }
        }
        config.addProperties(props);
        
        sessionFactory = config.buildSessionFactory();
    }

