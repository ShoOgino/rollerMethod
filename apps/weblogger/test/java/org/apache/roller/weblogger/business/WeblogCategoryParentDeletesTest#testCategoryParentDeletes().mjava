    /**
     * Test that deleting a categories parent object deletes all categories.
     */
    public void testCategoryParentDeletes() throws Exception {
        
        log.info("BEGIN");
        
        WeblogManager mgr = WebloggerFactory.getRoller().getWeblogManager();
        
        // root category is always available
        WeblogCategory root = mgr.getRootWeblogCategory(TestUtils.getManagedWebsite(testWeblog));
        
        // add a small category tree /subcat/subcat2
        WeblogCategory subcat = new WeblogCategory(TestUtils.getManagedWebsite(testWeblog), root, "categoryParentDeletes1", null, null);
        root.addCategory(subcat);
        mgr.saveWeblogCategory(subcat);
        WeblogCategory subcat2 = new WeblogCategory(TestUtils.getManagedWebsite(testWeblog), subcat, "categoryParentDeletes2", null, null);
        subcat.addCategory(subcat2);
        mgr.saveWeblogCategory(subcat2);
        TestUtils.endSession(true);
        
        // now delete the weblog owning these categories
        Exception ex = null;
        try {
            UserManager umgr = WebloggerFactory.getRoller().getUserManager();
            umgr.removeWebsite(TestUtils.getManagedWebsite(testWeblog));
            TestUtils.endSession(true);
        } catch (WebloggerException e) {
            ex = e;
        }
        assertNull(ex);
        
        log.info("END");
    }

