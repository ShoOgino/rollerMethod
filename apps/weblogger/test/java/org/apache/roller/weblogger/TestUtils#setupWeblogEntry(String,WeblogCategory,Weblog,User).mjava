    /**
     * Convenience method for creating a weblog entry.
     */
    public static WeblogEntry setupWeblogEntry(String anchor,
                                                   WeblogCategory cat,
                                                   Weblog weblog,
                                                   User user)
            throws Exception {
        
        WeblogEntry testEntry = new WeblogEntry();
        testEntry.setTitle(anchor);
        testEntry.setLink("testEntryLink");
        testEntry.setText("blah blah entry");
        testEntry.setAnchor(anchor);
        testEntry.setPubTime(new java.sql.Timestamp(new java.util.Date().getTime()));
        testEntry.setUpdateTime(new java.sql.Timestamp(new java.util.Date().getTime()));
        testEntry.setStatus(WeblogEntry.PUBLISHED);
        testEntry.setWebsite(getManagedWebsite(weblog));
        testEntry.setCreator(getManagedUser(user));
        testEntry.setCategory(cat);
        
        // store entry
        WeblogManager mgr = RollerFactory.getRoller().getWeblogManager();
        mgr.saveWeblogEntry(testEntry);
        
        // flush to db
        RollerFactory.getRoller().flush();
        
        // query for object
        WeblogEntry entry = mgr.getWeblogEntry(testEntry.getId());
        
        if(entry == null)
            throw new RollerException("error setting up weblog entry");
        
        return entry;
    }

