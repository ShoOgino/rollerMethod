    /**
     * Test that we can walk a folder tree.
     */
    public void testWalkFolderTree() throws Exception {
        
        log.info("BEGIN");
        
        BookmarkManager bmgr = WebloggerFactory.getRoller().getBookmarkManager();
        
        // start at root
        WeblogBookmarkFolder root = bmgr.getRootFolder(TestUtils.getManagedWebsite(testWeblog));
        
        // walk first level
        Set folders = root.getFolders();
        assertEquals(2, folders.size());
        assertTrue(folders.contains(testFolder));
        
        // find cat1
        WeblogBookmarkFolder folder = null;
        for(Iterator it = folders.iterator(); it.hasNext(); ) {
            folder = (WeblogBookmarkFolder) it.next();
            if(folder.getName().equals(f1.getName())) {
                break;
            }
        }
        
        // walk second level
        folders = folder.getFolders();
        assertEquals(1, folders.size());
        assertTrue(folders.contains(f2));
        
        // find cat2
        folder = (WeblogBookmarkFolder) folders.iterator().next();
        
        // walk third level
        folders = folder.getFolders();
        assertEquals(1, folders.size());
        assertTrue(folders.contains(f3));
        
        // find cat3
        folder = (WeblogBookmarkFolder) folders.iterator().next();
        
        // make sure this is the end of the tree
        folders = folder.getFolders();
        assertEquals(0, folders.size());
        
        log.info("END");
    }

