    //-----------------------------------------------------------------------
    protected UserData createUser(
            String username,
            String password,
            String fullName,
            String email) throws RollerException {
        UserManager umgr = getRoller().getUserManager();
        WeblogManager wmgr = getRoller().getWeblogManager();
        
        // Create and add new new user
        UserData ud = new UserData(null,
                username,      // userName
                password,      // password
                fullName,      // fullName
                email,         // emailAddress
                "en_US_WIN",
                "America/Los_Angeles",
                new java.util.Date(), // dateCreated
                Boolean.TRUE);
        umgr.addUser(ud);
        
        WebsiteData website = new WebsiteData(
                    null,                // id
                    username,                // name
                    username,              // handle
                    username,         // description
                    ud,                // userId
                    "dummy",             // defaultPageId
                    "dummy",             // weblogDayPageId
                    Boolean.TRUE,        // enableBloggerApi
                    null,                // bloggerCategory
                    null,                // defaultCategory
                    "editor-text.jsp",   // editorPage
                    "",                  // blacklist
                    Boolean.TRUE,        // allowComments
                    Boolean.FALSE,       // emailComments
                    "",                  // emailFromAddress
                    Boolean.TRUE,        // isEnabled
                    "dummy@example.com",               // emailAddress
                    new Date(),          // dateCreated
                    Boolean.TRUE,        // defaultAllowComments
                    0,                   // defaultCommentDays
                    Boolean.FALSE);      // moderateComments
            website.setEditorTheme("basic");
            website.setLocale("en_US_WIN");
            website.setTimeZone("America/Los_Angeles");
        
        ThemeManager themeMgr = getRoller().getThemeManager();
        Theme usersTheme = themeMgr.getTheme(website.getEditorTheme());
        themeMgr.saveThemePages(website, usersTheme);
        
        return ud;
    }

