    //------------------------------------------------------------------------    public void testRefererProcessing() throws RollerException    {        List refs = rmgr.getReferers(mWebsite);                    assertEquals("number of referers should equal count", count, refs.size());                int hits = rmgr.getDayHits(mWebsite);        assertEquals("There should be one fewer hits than referers", count, hits);             }        /* Self-Referrer Denial is now caught by the RefererFilter -- Allen G    public void testSelfRefererDenial() throws RollerException    {        // test against "self referrals"        getRoller().begin(UserData.SYSTEM_USER);        // create "direct" referer        boolean isSpam = rmgr.processRequest(            new MockRequest(                "20020101",                "direct",                "http://test.com",                null, mWebsite            )        );        getRoller().commit();        assertFalse("is not spam", isSpam);        int newRefCount = rmgr.getReferers(mWebsite).size();                // now create self-referer        getRoller().begin(UserData.SYSTEM_USER);                isSpam = rmgr.processRequest(            new MockRequest(                "20020202",                "http://test.com/page/" + mWebsite.getHandle(),                "http://test.com",                null, mWebsite            )        );        getRoller().commit();        assertFalse("is not spam", isSpam);                // number of referrers should not have changed        List refs = rmgr.getReferers(mWebsite);                    assertEquals("self referal not ignored", newRefCount, refs.size());                 // now create self-referer from editor page        isSpam = rmgr.processRequest(            new MockRequest(                "20020202",                "http://test.com/weblog.do",                "http://test.com",                null, mWebsite            )        );        getRoller().commit();        assertFalse("is not spam", isSpam);                // number of referrers should not have changed        refs = rmgr.getReferers(mWebsite);                    assertEquals("editor referal not ignored", newRefCount, refs.size());     }    */
