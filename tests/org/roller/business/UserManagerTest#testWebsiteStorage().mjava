    //------------------------------------------------------------------------
    /** Tests storage and removal of website. */
    public void testWebsiteStorage() throws RollerException
    {
        UserData user = null;
        WebsiteData stored = null;
        UserManager umgr = getRoller().getUserManager();

        getRoller().begin(UserData.SYSTEM_USER);

        user = new UserData(
            null,
            "testWebsiteStorage",
            "password3",
            "TestUser3",
            "testuser3@example.com",
            "en_US_WIN", "America/Los_Angeles",
            new java.util.Date(), Boolean.TRUE);
        umgr.storeUser( user );

        stored = new WebsiteData(
            null,
            "testsite",
            "testsite",
            "Testsite",
            user,
            "dpid",
            "wpid",
            Boolean.FALSE,
            null,
            null,
            "edit-weblog.jsp",
            "ignore",
            Boolean.TRUE,
            Boolean.FALSE,
            null,
            Boolean.TRUE, 
            "", 
            new Date());
        umgr.storeWebsite(stored);

        FolderData rootFolder = getRoller().getBookmarkManager()
            .createFolder(null, "root", "root", stored);
        rootFolder.save();

        WeblogCategoryData rootCategory = getRoller().getWeblogManager()
            .createWeblogCategory(stored, null, "root", "root", "");
        rootCategory.save();

        stored.setBloggerCategory(rootCategory);
        stored.setDefaultCategory(rootCategory);
        stored.save();

        getRoller().commit();

        getRoller().begin(UserData.SYSTEM_USER);
        WebsiteData retrieved = umgr.retrieveWebsite(stored.getId());
        assertEquals(stored, retrieved);
        retrieved.remove();
        getRoller().commit();

        getRoller().begin(UserData.SYSTEM_USER);
        user = umgr.retrieveUser(user.getId());
        user.remove();
        getRoller().commit();

        getRoller().begin(UserData.SYSTEM_USER);
        assertNull(umgr.retrieveUser(user.getId()));
        assertNull(umgr.retrieveWebsite(stored.getId()));
        getRoller().rollback();
    }

