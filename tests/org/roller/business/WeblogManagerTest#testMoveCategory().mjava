    public void testMoveCategory() throws RollerException
    {
        getRoller().begin(UserData.SYSTEM_USER);
        WeblogManager wmgr = getRoller().getWeblogManager();
        
        WeblogCategoryData c1 = wmgr.retrieveWeblogCategory(c1_id);       
        WeblogCategoryData c2 = wmgr.retrieveWeblogCategory(c2_id);       
        WeblogCategoryData c3 = wmgr.retrieveWeblogCategory(c3_id);       
        WeblogCategoryData dest = wmgr.retrieveWeblogCategory(dest_id);              
               
        // verify number of entries in each category
        dest = wmgr.retrieveWeblogCategory(dest.getId());
        c1 = wmgr.retrieveWeblogCategory(c1.getId());
        assertEquals(0, dest.retrieveWeblogEntries(true).size());
        assertEquals(0, dest.retrieveWeblogEntries(false).size());
        assertEquals(1, c1.retrieveWeblogEntries(false).size());
        assertEquals(3, c1.retrieveWeblogEntries(true).size());
        
        // move contents of source category c1 to destination catetory dest
        c1.setParent(dest);
        c1.save();
        
        getRoller().commit(); 
        
        getRoller().begin(UserData.SYSTEM_USER);
        
        // after move, verify number of entries in each category
        dest = wmgr.retrieveWeblogCategory(dest.getId());
        c1 = wmgr.retrieveWeblogCategory(c1_id);       
        c2 = wmgr.retrieveWeblogCategory(c2_id);       
        c3 = wmgr.retrieveWeblogCategory(c3_id);
               
        assertEquals(3, dest.retrieveWeblogEntries(true).size());
        assertEquals(0, dest.retrieveWeblogEntries(false).size());
                
        assertEquals(dest, c1.getParent());
        assertEquals(c1,   c2.getParent());
        assertEquals(c2,   c3.getParent());

        assertEquals(1, c1.retrieveWeblogEntries(false).size());
        assertEquals(1, c2.retrieveWeblogEntries(false).size());
        assertEquals(1, c3.retrieveWeblogEntries(false).size()); 
        
        List entries = c1.retrieveWeblogEntries(true);
        assertEquals(3, entries.size());
        
        getRoller().commit();      
    }

