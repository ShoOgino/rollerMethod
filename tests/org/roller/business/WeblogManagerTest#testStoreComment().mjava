    public void testStoreComment() throws Exception
    {
        getRoller().begin(UserData.SYSTEM_USER);
        WeblogManager wmgr = getRoller().getWeblogManager();
        
        // Get entry to which comment will be added
        WeblogEntryData entry1 = (WeblogEntryData)mEntriesCreated.get(1);
        
        // Ensure that entry is a persistent instance
        entry1 = getRoller().getWeblogManager().retrieveWeblogEntry(
            entry1.getId());
        
        CommentData comment = new CommentData();
        comment.setWeblogEntry(entry1);
        comment.setName("TestCommentUser");
        comment.setEmail("test@test.com");
        comment.setContent("");
        comment.setPostTime(new java.sql.Timestamp(new Date().getTime()));
        comment.setSpam(Boolean.FALSE);
        comment.setNotify(Boolean.FALSE);
        comment.setNotify(Boolean.FALSE);
        comment.setApproved(Boolean.TRUE);
        comment.setPending(Boolean.FALSE);
        comment.save();
        getRoller().commit();
        
        List comments = wmgr.getComments(
                null,   // website
                entry1, // weblogEntry
                null,   // search
                null,   // start
                null,   // end
                null,   // approved
                null,   // pending
                null,   // spam
                true,   // reverseChrono
                0,      // offset
                -1);    // length
        assertTrue(comments.size() > mCommentCount);
        
        getRoller().begin(UserData.SYSTEM_USER);
        wmgr.removeComment(comment.getId());
        getRoller().commit();
    }   

