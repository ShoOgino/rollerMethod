    public void testSubscriptionEntryStorage() throws Exception
    {
        Roller roller = getRoller();
        assertNotNull(roller);       
        PlanetManager planet = roller.getPlanetManager();
        assertNotNull(planet);        
        
        {   // save subscription
            roller.begin();
            PlanetSubscriptionData sub = new PlanetSubscriptionData();
            sub.setFeedUrl("test_url");
            planet.saveSubscription(sub);
            roller.commit();
        }
        {   // retrieve subscription and add entries
            roller.begin();
            PlanetSubscriptionData sub = planet.getSubscription("test_url");
            assertNotNull(sub);
            
            PlanetEntryData entry1 = new PlanetEntryData();
            entry1.setPermalink("test_entry1");
            entry1.setCategoriesString("test,test2");
            entry1.setSubscription(sub);
            entry1.setPublished(new Date());
            entry1.save();
            sub.addEntry(entry1);
            
            PlanetEntryData entry2 = new PlanetEntryData();
            entry2.setPermalink("test_entry2");
            entry2.setCategoriesString("test_cat1,test_cat2,test_cat3");
            entry2.setSubscription(sub);
            entry2.setPublished(new Date());
            entry2.save();
            sub.addEntry(entry2);
            
            roller.commit();
        }
        {   // get sub and check it's entries, remove it
            roller.begin();
            PlanetSubscriptionData sub = planet.getSubscription("test_url");
            assertEquals(2, sub.getEntries().size());
            planet.deleteSubscription(sub);
            roller.commit();
        }
        {   // make sure sub is gone
            roller.begin();
            PlanetSubscriptionData sub = planet.getSubscription("test_url");
            assertNull(sub);
            roller.rollback();
        }
    }

