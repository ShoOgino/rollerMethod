    public void testBookmarkPermissions() throws Exception
    {
        getRoller().begin(UserData.ANONYMOUS_USER);
        
        // evil testuser
        UserData testuser = getRoller().getUserManager().getUser("testuser");       
        assertNotNull(testuser);
        
        // gets hold of testuser0's entry
        WebsiteData website0 = getRoller().getUserManager().getWebsite("testuser0");
        assertNotNull(website0);
        List folders = getRoller().getBookmarkManager().getAllFolders(website0);
        FolderData root = (FolderData)folders.get(0);
        FolderData folder = (FolderData)root.getFolders().get(0);
        
        BookmarkData bookmark = (BookmarkData)(folder.getBookmarks().iterator().next());
        assertNotNull(bookmark);
        
        // and tries to save it
        getRoller().setUser(testuser);
        boolean denied = false; 
        try 
        {
            bookmark.save();
        }
        catch (RollerPermissionsException e)
        {
            // permission denied!
            denied = true;
        }       
        assertTrue(denied);
        
        getRoller().setUser(testuser);
        denied = false; 
        try 
        {
            folder.save();
        }
        catch (RollerPermissionsException e)
        {
            // permission denied!
            denied = true;
        }       
        assertTrue(denied);
       
        getRoller().rollback();
    }

