    public void testWeblogEntryPermissions() throws Exception
    {
        getRoller().begin(UserData.ANONYMOUS_USER);
        UserManager umgr = getRoller().getUserManager();
        
        // evil badguy
        UserData badguy = umgr.getUser("testuser0");       
        assertNotNull(badguy);
        
        // gets hold of goodguy's entry
        UserData goodguy = umgr.getUser("testuser2");
        WebsiteData website0 = (WebsiteData)umgr.getWebsites(goodguy, null).get(0);
        assertNotNull(website0);
        List entries = getRoller().getWeblogManager().getWeblogEntries(
                website0,
                null,       // start
                new Date(), // end
                null,       // cat
                null,
                new Integer(1));
        WeblogEntryData entry = (WeblogEntryData)entries.get(0);
        assertNotNull(entry);
        
        // and tries to save it
        getRoller().setUser(badguy);
        boolean denied = false; 
        try 
        {
            entry.save();
        }
        catch (RollerPermissionsException e)
        {
            // permission denied!
            denied = true;
        }       
        assertTrue(denied);
        getRoller().rollback();
    }

