    public void setUp() throws Exception
    {
        // must do super.setup() before creating MockRollerContext
        super.setUp();
    
        mockFactory = new WebMockObjectFactory();
        
        // have to set ServletContext init-param
        MockServletContext mContext = mockFactory.getMockServletContext();
        String persistence = System.getProperty("rollerImpl");
        if (persistence == null || persistence.equals("hibernate") )
        {
            // Instantiate Hibernate version
            persistence = "org.roller.business.hibernate.RollerImpl";
        }
        else
        {
            // Instantiate Castor version
            persistence = "org.roller.business.castor.RollerImpl"; 
        }
        mContext.setInitParameter("org.roller.persistence", persistence);
    
        // create mock RollerContext
        rollerContext = new MockRollerContext();
        rollerContext.init(mContext);
    }

