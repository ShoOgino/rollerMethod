    /**
     * ExportRss needs to load velocity.properties from ServletContext.
     * For the mock implementation we need to set the 'resource stream'.
     * @param mContext
     * @throws IOException
     */
    private void setupVelocityProperties(MockServletContext mContext) throws IOException
    {
        InputStream is = this.getClass().getClassLoader().getResourceAsStream("velocity.properties");
        if (is == null) fail("Unable to find velocity.properties");
        BufferedInputStream bis = new BufferedInputStream(is, 1);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        int buf = bis.read();
        do
        {
            bos.write(buf);
            buf = bis.read();
        }
        while(buf != -1);
        
        byte[] bytes = bos.toByteArray();
        mContext.setResourceAsStream("/WEB-INF/velocity.properties", bytes);
        try
        {
            bos.close();
            bis.close();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }

