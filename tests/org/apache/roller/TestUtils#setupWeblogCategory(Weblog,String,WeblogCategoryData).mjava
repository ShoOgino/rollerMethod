    /**
     * Convenience method for creating a weblog category.
     */
    public static WeblogCategoryData setupWeblogCategory(Weblog weblog,
                                                         String name,
                                                         WeblogCategoryData parent)
            throws Exception {
        
        WeblogManager mgr = RollerFactory.getRoller().getWeblogManager();
        WeblogCategoryData root = mgr.getRootWeblogCategory(weblog);
        
        WeblogCategoryData catParent = root;
        if(parent != null) {
            catParent = parent;
        }
        WeblogCategoryData testCat = new WeblogCategoryData(weblog, catParent, name, null, null);
        mgr.saveWeblogCategory(testCat);
        
        // flush to db
        RollerFactory.getRoller().flush();
        
        // query for object
        WeblogCategoryData cat = mgr.getWeblogCategory(testCat.getId());
        
        if(cat == null)
            throw new RollerException("error setting up weblog category");
        
        return cat;
    }

