    /**
     * Test add/modify/remove of folders (no bookmarks).
     */
    public void testFolderCRUD() throws Exception {
        
        BookmarkManager bmgr = getRoller().getBookmarkManager();
        
        FolderData root = bmgr.getRootFolder(testWeblog);
        
        // start out with no folders and no bookmarks
        assertEquals(0, root.getFolders().size());
        assertEquals(0, root.getBookmarks().size());
        
        // add a folder
        FolderData folder = new FolderData(root, "TestFolder1", null, testWeblog);
        bmgr.saveFolder(folder);
        TestUtils.endSession(true);
        
        // check that folder was saved
        root = bmgr.getRootFolder(testWeblog);
        folder = (FolderData) root.getFolders().iterator().next();
        assertEquals("TestFolder1", folder.getName());
        
        // modify folder
        folder.setName("folderTest1");
        bmgr.saveFolder(folder);
        TestUtils.endSession(true);
        
        // check that folder was saved
        root = bmgr.getRootFolder(testWeblog);
        folder = (FolderData) root.getFolders().iterator().next();
        assertEquals("folderTest1", folder.getName());
        
        // add a subfolder
        FolderData subfolder = new FolderData(folder, "subfolderTest1", null, testWeblog);
        bmgr.saveFolder(subfolder);
        TestUtils.endSession(true);
        
        // check that subfolder was saved and we can navigate to it
        root = bmgr.getRootFolder(testWeblog);
        assertEquals(1, root.getFolders().size());
        folder = (FolderData) root.getFolders().iterator().next();
        assertEquals("folderTest1", folder.getName());
        assertEquals(1, folder.getFolders().size());
        subfolder = (FolderData) folder.getFolders().iterator().next();
        assertEquals("subfolderTest1", subfolder.getName());
        
        // test remove folder, which should cascade to subfolders
        bmgr.removeFolder(folder);
        TestUtils.endSession(true);
        
        // check that folders were removed
        root = bmgr.getRootFolder(testWeblog);
        assertEquals(0, root.getFolders().size());
    }

