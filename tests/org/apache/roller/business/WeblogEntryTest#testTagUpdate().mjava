    public void testTagUpdate() throws Exception {
    
        WeblogManager mgr = RollerFactory.getRoller().getWeblogManager();
        
        // setup some test entries to use
        WeblogEntryData entry = TestUtils.setupWeblogEntry("entry1", testWeblog.getDefaultCategory(), testWeblog, testUser);
        entry.addTag("testTag");
        String id = entry.getId();
        TestUtils.endSession(true);

        entry = mgr.getWeblogEntry(id);
        assertNotNull(entry);
        assertNotNull(entry.getTags());
        assertEquals(1, entry.getTags().size());
        assertEquals("testTag",((WeblogEntryTagData) entry.getTags().iterator().next()).getName());

        // update a weblog entry tag
        WeblogEntryTagData tag = ((WeblogEntryTagData) entry.getTags().iterator().next());
        tag.setName("updatedTestTag");
        TestUtils.endSession(true);

        entry = mgr.getWeblogEntry(id);
        assertNotNull(entry);
        assertEquals(1, entry.getTags().size());
        assertEquals("updatedTestTag",((WeblogEntryTagData) entry.getTags().iterator().next()).getName());
      
        // teardown our test entry
        TestUtils.teardownWeblogEntry(id);
        TestUtils.endSession(true);
        
    }

