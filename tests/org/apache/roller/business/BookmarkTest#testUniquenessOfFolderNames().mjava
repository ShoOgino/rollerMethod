    /** 
     * Ensure that duplicate folder name will throw RollerException 
     */
    public void testUniquenessOfFolderNames() throws Exception {
        
        BookmarkManager bmgr = getRoller().getBookmarkManager();
        
        FolderData root = bmgr.getRootFolder(testWeblog);
        
        FolderData f1 = new FolderData();
        f1.setName("f1");
        f1.setParent(root);
        f1.setWebsite(testWeblog);
        bmgr.saveFolder(f1);
        
        // first child folder
        FolderData f2 = new FolderData();
        f2.setName("f2");
        f2.setParent(f1);
        f2.setWebsite(testWeblog);
        bmgr.saveFolder(f2);
        
        TestUtils.endSession(true);
        
        // need to requery for folder since session was closed
        f1 = bmgr.getFolder(f1.getId());
        
        boolean exception = false;
        try {
            // child folder with same name as first
            FolderData f3 = new FolderData();
            f3.setName("f2");
            f3.setParent(f1);
            f3.setWebsite(testWeblog);
            bmgr.saveFolder(f3);
            TestUtils.endSession(true);
        } catch (RollerException e) {
            exception = true;
        }
        
        assertTrue(exception);
    }

