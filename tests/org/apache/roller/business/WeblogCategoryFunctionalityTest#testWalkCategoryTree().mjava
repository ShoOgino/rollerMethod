    /**
     * Test that we can walk a category tree.
     */
    public void testWalkCategoryTree() throws Exception {
        
        log.info("BEGIN");
        
        WeblogManager mgr = RollerFactory.getRoller().getWeblogManager();
        
        // start at root
        WeblogCategoryData root = mgr.getRootWeblogCategory(TestUtils.getManagedWebsite(testWeblog));
        
        // walk first level
        Set cats = root.getWeblogCategories();
        assertEquals(2, cats.size());
        assertTrue(cats.contains(testCat));
        
        // find cat1
        WeblogCategoryData cat = null;
        for(Iterator it = cats.iterator(); it.hasNext(); ) {
            cat = (WeblogCategoryData) it.next();
            if(cat.getName().equals(cat1.getName())) {
                break;
            }
        }
        
        // walk second level
        cats = cat.getWeblogCategories();
        assertEquals(1, cats.size());
        assertTrue(cats.contains(cat2));
        
        // find cat2
        cat = (WeblogCategoryData) cats.iterator().next();
        
        // walk third level
        cats = cat.getWeblogCategories();
        assertEquals(1, cats.size());
        assertTrue(cats.contains(cat3));
        
        // find cat3
        cat = (WeblogCategoryData) cats.iterator().next();
        
        // make sure this is the end of the tree
        cats = cat.getWeblogCategories();
        assertEquals(0, cats.size());
        
        log.info("END");
    }

