    /**
     * Test basic persistence operations ... Create, Update, Delete.
     */
    public void testTaskLockCRUD() throws Exception {
        
        ThreadManager mgr = RollerFactory.getRoller().getThreadManager();
        
        // need a test task to play with
        RollerTask task = new TestTask();
        
        // try to acquire a lock
        assertTrue(mgr.acquireLock(task));
        TestUtils.endSession(true);
        
        // make sure task is locked
        assertFalse(mgr.acquireLock(task));
        TestUtils.endSession(true);
        
        // try to release a lock
        assertTrue(mgr.releaseLock(task));
        TestUtils.endSession(true);
    }

