    public void testCreateAnEntryWithTags() throws Exception {
        WeblogManager mgr = RollerFactory.getRoller().getWeblogManager();
        WeblogEntryData entry = null;
        
        WeblogEntryData testEntry = new WeblogEntryData();
        testEntry.setTitle("entryTestEntry");
        testEntry.setLink("testEntryLink");
        testEntry.setText("blah blah entry");
        testEntry.setAnchor("testEntryAnchor");
        testEntry.setPubTime(new java.sql.Timestamp(new java.util.Date().getTime()));
        testEntry.setUpdateTime(new java.sql.Timestamp(new java.util.Date().getTime()));
        testEntry.setWebsite(testWeblog);
        testEntry.setCreator(testUser);
        testEntry.setCategory(testWeblog.getDefaultCategory());
                
        WeblogEntryTagData tag = new WeblogEntryTagData();
        tag.setName("testTag");
        tag.setWebsite(testWeblog);
        tag.setWeblogEntry(testEntry);
        tag.setUser(testUser);
        tag.setTime(new java.sql.Timestamp(new java.util.Date().getTime()));
        
        testEntry.getTags().add(tag);
        
        // create a weblog entry
        mgr.saveWeblogEntry(testEntry);
        String id = testEntry.getId();
        TestUtils.endSession(true);
        
        // make sure entry was created
        entry = mgr.getWeblogEntry(id);
        assertNotNull(entry);
        assertEquals(testEntry, entry);
        assertNotNull(entry.getTags());
        assertEquals(1, entry.getTags().size());
        assertEquals("testTag",((WeblogEntryTagData) entry.getTags().iterator().next()).getName());
        
        // teardown our test entries
        TestUtils.teardownWeblogEntry(id);
        TestUtils.endSession(true);
    }

