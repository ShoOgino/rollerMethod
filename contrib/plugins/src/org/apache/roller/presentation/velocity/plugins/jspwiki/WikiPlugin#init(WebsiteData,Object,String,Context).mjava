    /**     * Initialize the JSPWiki Engine if not done so already.     * Put the Plugin into the VelocityContex (is this still necessary?-Lance).     */    public void init(            WebsiteData website,            Object context,            String contextURL,            Context ctx) {        try {            if (WikiPlugin.mWikiEngine == null) {                if (context != null) {                    // get wiki engine when running inside webapp                    ServletContext servletContext = (ServletContext)context;                     WikiPlugin.mWikiEngine = WikiEngine.getInstance(servletContext, null);                } else {                    // get wiki engine when running from command-line                    Properties wikiprops = new Properties();                    wikiprops.load(getClass().getResourceAsStream("/jspwiki.properties"));                    WikiPlugin.mWikiEngine = new WikiEngine(wikiprops);                }            }            if (WikiPlugin.mWikiContext == null && WikiPlugin.mWikiEngine != null) {                WikiPlugin.mWikiContext = new WikiContext(                        WikiPlugin.mWikiEngine, WikiPlugin.mWikiPage );            }            if (WikiPlugin.mWikiContext != null && WikiPlugin.mWikiEngine != null) {                ctx.put("wikiPlugin",this);            }        } catch (Exception e) {            mLogger.error("ERROR initializing WikiPlugin",e);        }    }
