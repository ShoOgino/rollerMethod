    protected void initDay(Date month) {
        calendar = Calendar.getInstance(
                weblog.getTimeZoneInstance(),
                weblog.getLocaleInstance());
        
        Calendar cal = (Calendar)calendar.clone();
        Date startDate = DateUtil.getStartOfMonth(month);
        Date endDate = DateUtil.getEndOfMonth(month);
        
        // Determine previous non-empty month
        // Get entries before startDate, using category restriction limit 1
        // Use entry's date as previous month
        try {
            WeblogManager mgr = RollerFactory.getRoller().getWeblogManager();
            List prevEntries = mgr.getWeblogEntries(
                    weblog,                    // website
                    null,                      // user
                    null,                      // startDate
                    startDate,                 // endDate 
                    cat,                       // cat
                    null,                      // tags
                    WeblogEntryData.PUBLISHED, // status
                    null,                      // sortby (null means pubTime)
                    WeblogManager.DESCENDING,  // sortorder, null means DESCENDING
                    locale,                    // locale
                    0, 1);                     // offset, range
            if (prevEntries.size() > 0) {
                WeblogEntryData prevEntry = (WeblogEntryData)prevEntries.get(0);
                prevMonth = DateUtil.getStartOfMonth(new Date(prevEntry.getPubTime().getTime()));
            }
        } catch (RollerException e) {
            log.error("ERROR determining previous non-empty month");
        }
        
        // Determine next non-empty month
        // Get entries after endDate, using category restriction limit 1
        // Use entry's date as next month
        try {
            WeblogManager mgr = RollerFactory.getRoller().getWeblogManager();
            List nextEntries = mgr.getWeblogEntries(
                    weblog,                    // website
                    null,                      // user
                    endDate,                   // startDate
                    null,                      // endDate 
                    cat,                       // cat
                    null,                      // tags
                    WeblogEntryData.PUBLISHED, // status
                    null,                      // sortby (null means pubTime)
                    WeblogManager.ASCENDING,   // sortorder
                    locale,                    // locale
                    0, 1);                     // offset, range
            if (nextEntries.size() > 0) {
                WeblogEntryData nextEntry = (WeblogEntryData)nextEntries.get(0);
                nextMonth = DateUtil.getStartOfMonth(new Date(nextEntry.getPubTime().getTime()));
            }
        } catch (RollerException e) {
            log.error("ERROR determining next non-empty month");
        }  
        
        // Fix for ROL-840 Don't include future entries
        Date now = new Date();
        if (endDate.after(now)) endDate = now;
        
        loadWeblogEntries(startDate, endDate, cat);
    }

