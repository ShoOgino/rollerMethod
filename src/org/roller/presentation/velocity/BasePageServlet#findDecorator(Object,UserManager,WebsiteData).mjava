    //------------------------------------------------------------------------
    /**     * Try to load user-specified Decorator (if specified).  Failing that     * see if user has a _decorator Page, if not check for a _decorator     * in the Preview resource loader.  Finally, if none of those can     * be found fall back to the no-op decorator.     * @param object     * @return     */    private Template findDecorator(Object object, UserManager userMgr, WebsiteData wd)         throws ResourceNotFoundException, ParseErrorException, RollerException, Exception    {        Template decorator = null;        PageData decoratorPage = null;        String decoratorId = null;                // check for user-specified decorator        String decoratorName = (String)object;        if (decoratorName != null)        {                decoratorPage = userMgr.getPageByName(wd, decoratorName);            if (decoratorPage != null)             {                decoratorId = decoratorPage.getId();            }        }                // if no user-specified decorator try default page-name        if (decoratorPage == null)        {            decoratorPage = userMgr.getPageByName(wd, "_decorator");            if (decoratorPage != null)             {                decoratorId = decoratorPage.getId();            }            else            {                // could be in PreviewResourceLoader                decoratorId = "_decorator";            }        }        // try loading Template        if (decoratorId != null)         {            try            {                decorator = getTemplate(decoratorId, "UTF-8");            }            catch (Exception e)            {                // it may not exist, so this is okay            }        }                // couldn't find Template, load default "no-op" decorator        if (decorator == null)         {            decorator = getTemplate("/themes/noop_decorator.vm", "UTF-8");        }        return decorator;    }
