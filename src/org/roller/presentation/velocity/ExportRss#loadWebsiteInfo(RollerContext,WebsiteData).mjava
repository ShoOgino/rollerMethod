    /**     * Load information pertaining to the Website and     * its associated User.     * @param rollerCtx     */    private void loadWebsiteInfo(RollerContext rollerCtx, WebsiteData website)    {        ctx.put("website",       website);        ctx.put("userName",      user.getUserName() );        ctx.put("fullName",      user.getFullName() );        ctx.put("emailAddress",  user.getEmailAddress() );        ctx.put("encodedEmail",  RegexUtil.encode(user.getEmailAddress()));        ctx.put("obfuscatedEmail",  RegexUtil.obfuscateEmail(user.getEmailAddress()));        RollerConfig  rollerConfig = rollerCtx.getRollerConfig();                // custom figureResourcePath() due to no "request" object        StringBuffer sb = new StringBuffer();        String uploadDir = rollerConfig.getUploadDir();        if ( uploadDir != null && uploadDir.trim().length() > 0 )        {            sb.append( uploadDir );        }        else        {            String uploadPath = rollerConfig.getUploadPath();            if (StringUtils.isEmpty(uploadPath))                 uploadPath = RollerContext.USER_RESOURCES;            sb.append(RollerContext.getServletContext().getRealPath(uploadPath));        }        String path = sb.toString();        //System.out.println("writing files to " + path);        ctx.put("uploadPath", path);    }
