    /**	 * @param ctx	 */	private void setupContext(Context ctx, RollerRequest rreq) throws RollerException	{        HttpServletRequest request = rreq.getRequest();        RollerContext rollerCtx = RollerContext.getRollerContext( request );                UserData user = rreq.getUser();        ctx.put("fullName", user.getFullName()); // name for FlavorServlet compatibility                // foaf:homepage to equal base URL for user        String homepage = Utilities.escapeHTML(                 rollerCtx.getAbsoluteContextUrl(request) +                     "/page/" + rreq.getUser().getUserName() );        ctx.put("websiteURL", homepage); // name for FlavorServlet compatibility        // see if foaf:weblog is different Page        WebsiteData website = rreq.getWebsite();        UserManager usrMgr = RollerContext.getRoller(request).getUserManager();        org.roller.model.Template weblog = website.getPageByName("Weblog");                // if weblog != homepage, add to context        if (weblog != null && !website.getDefaultPageId().equals(weblog.getId()))        {            String weblogUrl = Utilities.escapeHTML(                     rollerCtx.getAbsoluteContextUrl(request) +                         "/page/" + rreq.getUser().getUserName() +                             "/" + weblog.getLink() );        	ctx.put("weblog", weblogUrl);        }                // use SHA1 encrypted email address, including mailto: prefix        String shaEmail = Utilities.encodePassword(                "mailto:" + user.getEmailAddress(), "SHA");        ctx.put("shaEmail", shaEmail);	}
