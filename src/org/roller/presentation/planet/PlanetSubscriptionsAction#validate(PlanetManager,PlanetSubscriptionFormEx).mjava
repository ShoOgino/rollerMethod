    /** Validate posted subscription, fill in blanks via Technorati */
    private ActionErrors validate(
            PlanetManager planet, PlanetSubscriptionFormEx form)
    {
        String technoratiTitle = null;
        String technoratiFeedUrl = null;
        int inboundlinks = -1;
        int inboundblogs = -1;
        if (form.getSiteUrl()!=null && form.getSiteUrl().trim().length() > 0)
        {
            try 
            {
                PlanetConfigData config = planet.getConfiguration();
                Technorati technorati = null;
                if (config.getProxyHost()!=null && config.getProxyPort() > 0)
                {
                    technorati = new Technorati(
                            config.getProxyHost(), config.getProxyPort());
                }
                else 
                {
                    technorati = new Technorati();
                }
                Technorati.Result result = 
                        technorati.getBloginfo(form.getSiteUrl());
                technoratiTitle = result.getWeblog().getName();
                technoratiFeedUrl = result.getWeblog().getRssurl();
                form.setInboundlinks(result.getWeblog().getInboundlinks());
                form.setInboundblogs(result.getWeblog().getInboundblogs());
            }
            catch (Exception e)
            {
                logger.debug("Unable to contact Technorati", e);
            }
        }

        ActionErrors errors = new ActionErrors();
        if (form.getTitle()==null || form.getTitle().trim().length()==0)
        {
            if (technoratiTitle!=null && technoratiTitle.trim().length()>0)
            {
                form.setTitle(technoratiTitle);
            }
            else 
            {
                errors.add(null,
                    new ActionError("planetSubscription.error.title"));
            }
        }
        if (form.getFeedUrl()==null || form.getFeedUrl().trim().length()==0)
        {
            if (technoratiFeedUrl!=null && technoratiFeedUrl.trim().length()>0)
            {
                form.setFeedUrl(technoratiFeedUrl);
            }
            else 
            {
                errors.add(null,
                    new ActionError("planetSubscription.error.feedUrl"));
            }
        }
        if (form.getSiteUrl()==null || form.getSiteUrl().trim().length()==0)
        {
            errors.add(null,
                new ActionError("planetSubscription.error.siteUrl"));
        }
        return errors;
    }

